{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Metadata -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- SEO -->
  <title>{{ project.title }} | Entropic</title>
    <meta name="keywords" content="architecture, urban design, Scandinavia, Europe, Middle East projects">
    <meta name="author" content="ENTROPIC">
    <meta name="format-detection" content="telephone=no,email=no,address=no">


    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/icons/favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/icons/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/icons/favicon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'images/icons/favicon/site.webmanifest' %}">
    
  <!-- Fonts  -->
  <link rel="stylesheet" href="https://use.typekit.net/ucm2cim.css">
  <link rel="stylesheet" href="https://use.typekit.net/ucm2cim.css">

  <!-- Styles -->
  <link rel="stylesheet" href="{% static 'styles/styles.css' %}">
  <link rel="stylesheet" href="{% static 'styles/individual-projects.css' %}">
</head>

<body class="page-individual" data-category="public">
    <header class="site-header">
        <div class="header-container">
            <a href="{% url 'home' %}" class="logo">
                <span class="logo-bg"></span>
                <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1463.25 174.57">
                    <g id="Layer_2" data-name="Layer 2">
                        <g id="Layer_1-2" data-name="Layer 1">
                            <polygon points="1346.29 174.51 1350.36 174.57 1463.25 174.57 1463.25 135.53 1347.36 135.41 1342.83 134.68 1338.65 133.17 1334.77 130.68 1332.21 128.03 1330.39 125.24 1329.08 122.17 1328.14 118.35 1327.8 115.44 1327.72 113.09 1327.89 58.1 1328.72 53.61 1330.32 49.48 1332.11 46.67 1334.79 43.88 1338.51 41.47 1341.6 40.24 1345.47 39.38 1347.81 39.13 1350.16 39.05 1463.25 39.05 1463.25 0 1402.19 0 1401.64 0 1350.26 0 1346.29 .07 1338.73 .57 1333.47 1.27 1328.55 2.24 1323.95 3.48 1319.68 4.97 1315.8 6.67 1312.15 8.65 1308.79 10.88 1305.71 13.35 1302.9 16.07 1300.34 19.06 1298.04 22.32 1295.94 25.95 1294.12 29.81 1292.57 33.97 1291.26 38.45 1290.21 43.26 1289.43 48.39 1288.92 53.85 1288.74 57.61 1288.67 61.68 1288.67 112.99 1288.74 116.96 1289.24 124.53 1289.94 129.78 1290.91 134.7 1292.15 139.29 1293.64 143.58 1295.34 147.45 1297.32 151.11 1299.55 154.46 1302.02 157.54 1304.74 160.35 1307.73 162.91 1310.99 165.21 1314.63 167.32 1318.48 169.12 1322.63 170.68 1327.12 171.99 1331.92 173.04 1337.05 173.82 1342.52 174.33 1346.29 174.51"/>
                            <rect x="1220.74" y="0" width="39.05" height="174.57"/>
                            <path d="M1191.79,65.55l.07-3.97-.07-3.97-.5-7.56-.7-5.25-.97-4.92-1.23-4.6-1.49-4.28-1.7-3.88-1.98-3.66-2.22-3.36-2.47-3.08-2.72-2.81-2.99-2.55-3.26-2.3-3.56-2.06-3.93-1.85-4.17-1.56-4.48-1.31-4.8-1.05-5.14-.78-5.46-.51-3.77-.18-4.07-.07h-51.31l-3.97.07-7.56.5-5.25.7-4.92.97-4.6,1.23-4.27,1.49-3.88,1.7-3.66,1.98-3.36,2.22-3.08,2.47-2.81,2.72-2.55,2.98-2.31,3.26-2.06,3.56-1.85,3.93-1.56,4.16-1.31,4.48-1.05,4.8-.78,5.13-.51,5.46-.18,3.77-.06,4.07v112.89h39.05s0-51.41,0-51.41l77.91-.06,7.56-.5,5.25-.7,4.93-.97,4.6-1.23,4.28-1.49,3.88-1.7,3.66-1.98,3.36-2.23,3.08-2.47,2.81-2.73,2.55-2.98,2.3-3.26,2.1-3.63,1.81-3.85,1.56-4.17,1.31-4.48,1.05-4.8.78-5.14.51-5.46.18-3.77ZM1152.32,67.36l-1.01,3.81-1.93,3.97-2.41,3.03-3.01,2.44-3.47,1.77-3.76,1.12-4.03.54-2.32.08h-51.51s-.3,0-.3,0h-22.24s.39-27.74.39-27.74l1.11-4.37,1.93-3.97,2.41-3.03,2.56-2.14,2.88-1.63,3.15-1.16,4.49-.85,3.52-.18,55.01.17,4.44.82,3.65,1.36,3.31,2.03,3.14,3.11,2.06,3.29,1.39,3.64.85,4.5.18,3.71-.49,5.68Z"/>
                            <path d="M986.65,110.66l.69-4.86.52-5.06.19-2.6.26-5.3.09-5.55-.09-5.55-.46-8.02-.53-5.07-.7-4.87-.87-4.67-1.04-4.48-1.2-4.29-1.37-4.09-1.53-3.9-1.65-3.63-1.85-3.53-2-3.34-2.16-3.16-2.32-2.99-2.48-2.81-2.65-2.65-2.81-2.48-2.99-2.32-3.16-2.16-3.42-2.05-3.52-1.84-3.71-1.68-3.89-1.52-4.09-1.36-4.28-1.19-4.48-1.03-4.67-.86-4.86-.69-5.06-.52-2.6-.19-5.3-.26-5.55-.09-5.55.09-8.02.46-5.07.53-4.87.7-4.68.87-4.48,1.04-4.29,1.2-4.09,1.37-3.9,1.53-3.71,1.69-3.44,1.81-3.34,2-3.16,2.16-2.99,2.32-2.81,2.48-2.65,2.65-2.48,2.82-2.32,2.99-2.16,3.16-2,3.34-1.89,3.6-1.68,3.71-1.52,3.89-1.36,4.09-1.19,4.28-1.03,4.48-.86,4.66-.69,4.86-.52,5.06-.19,2.6-.26,5.3-.09,5.55.09,5.55.46,8.02.53,5.06.7,4.87.87,4.67,1.04,4.48,1.2,4.28,1.37,4.09,1.53,3.9,1.69,3.71,1.85,3.52,1.96,3.27,2.16,3.16,2.32,2.99,2.48,2.81,2.65,2.65,2.82,2.48,2.99,2.32,3.16,2.16,3.34,2,3.6,1.88,3.71,1.68,3.9,1.52,4.09,1.36,4.28,1.19,4.47,1.03,4.67.86,4.86.69,5.06.52,2.6.19,5.3.26,5.55.09,5.55-.09,8.02-.46,5.06-.53,4.88-.7,4.67-.87,4.48-1.04,4.28-1.2,4.09-1.37,3.9-1.53,3.71-1.69,3.52-1.85,3.26-1.96,3.16-2.16,2.99-2.32,2.81-2.48,2.65-2.65,2.48-2.81,2.32-2.99,2.16-3.16,2-3.34,1.85-3.52,1.72-3.78,1.52-3.9,1.36-4.09,1.19-4.28,1.03-4.47.86-4.67ZM947.63,93.85l-.61,4.98-.98,4.73-1.36,4.46-1.83,4.33-2.09,3.72-2.69,3.69-2.99,3.16-2.36,2.01-2.68,1.9-2.88,1.68-3.05,1.44-3.22,1.22-4.54,1.28-4.81.9-5.07.53-5.37.18-2.8-.05-6.28-.48-4.87-.79-4.59-1.17-4.32-1.56-3.06-1.43-3.94-2.37-3.45-2.7-3.07-3.09-2.68-3.46-2.27-3.79-1.36-2.89-1.22-3.23-1.27-4.52-.9-4.8-.53-5.07-.18-5.48.27-6.47.61-4.99.98-4.72,1.35-4.45,1.76-4.19,2.26-4.03,2.59-3.53,2.99-3.17,3.38-2.78,3.56-2.28,4.03-1.98,4.33-1.57,4.6-1.18,4.87-.8,3.82-.36,5.48-.18,6.46.27,4.99.61,4.72.98,4.45,1.35,3.17,1.28,4.11,2.16,3.62,2.49,3.27,2.9,2.88,3.28,2.47,3.63,1.99,3.8,1.29,3.16,1.07,3.32,1.09,4.68.71,4.94.22,2.56.18,5.48-.27,6.47Z"/>
                            <path d="M724.29,174.57h52.84l-46.35-50.83,16.33-3.32,4.99-1.53,4.59-1.86,4.2-2.17,3.82-2.48,3.46-2.8,2.31-2.24,2.94-3.42,2.56-3.71,2.25-4.08,1.94-4.47,1.62-4.85,1.3-5.28.75-4.22.39-2.9.31-3.05.22-3.16.14-3.35.04-3.27-.06-3.98-.5-7.56-.7-5.25-.97-4.92-1.23-4.59-1.5-4.28-1.74-3.95-1.95-3.58-2.22-3.36-2.47-3.08-2.72-2.81-2.99-2.56-3.26-2.31-3.62-2.1-3.86-1.81-4.17-1.56-4.48-1.31-4.8-1.05-5.14-.78-5.46-.51-3.77-.18-4.07-.07h-51.31l-3.97.07-7.56.5-5.26.7-4.92.97-4.6,1.23-4.28,1.49-3.96,1.74-3.57,1.94-3.36,2.22-3.08,2.47-2.81,2.72-2.56,2.99-2.31,3.26-2.1,3.62-1.81,3.86-1.56,4.16-1.31,4.48-1.05,4.81-.78,5.13-.51,5.46-.18,3.77-.06,4.07v112.89h39.05s0-51.41,0-51.41h28l46.87,51.41ZM649.42,84.12l.4-27.76,1.09-4.32,1.64-3.52,2.84-3.64,2.42-2.01,3.39-1.86,3.73-1.21,4.57-.67,2.36-.08,54.99.17,4.47.82,3.66,1.36,3.73,2.37,3.15,3.35,1.86,3.2,1.3,3.68.76,4.55.13,3.12-.49,5.68-1,3.78-1.64,3.51-2.84,3.64-2.87,2.3-2.95,1.57-3.73,1.21-4.57.67-2.35.08h-74.04Z"/>
                            <polygon points="581.49 0 406.92 0 406.92 39.05 474.68 39.05 474.68 174.57 513.72 174.57 513.72 39.05 581.49 39.05 581.49 0"/>
                            <polygon points="331.36 43.43 334.61 46.69 336.56 49.84 337.95 53.46 338.8 57.97 338.98 61.48 338.99 112.99 338.98 113.44 338.99 174.57 378.03 174.57 378.03 113.52 378.03 112.97 378.03 61.59 377.97 57.62 377.46 50.06 376.76 44.8 375.79 39.88 374.56 35.28 373.07 31 371.33 27.05 369.38 23.47 367.16 20.11 364.69 17.04 361.96 14.22 358.98 11.67 355.71 9.36 353.38 7.96 349.55 6.03 345.49 4.39 341.11 3 336.42 1.86 331.39 .99 326.05 .39 324.19 .25 320.42 .07 316.35 0 265.04 0 261.07 .07 253.51 .57 248.26 1.27 243.34 2.24 238.74 3.48 234.46 4.97 230.58 6.67 226.93 8.65 223.57 10.88 220.49 13.35 217.68 16.07 215.13 19.06 212.82 22.32 210.76 25.88 208.91 29.8 207.35 33.97 206.04 38.45 205 43.25 204.21 48.39 203.71 53.84 203.52 57.62 203.46 61.69 203.46 174.57 242.5 174.57 242.51 113.52 242.5 113.01 242.68 58.07 243.49 53.63 244.85 49.98 247.35 46.1 250 43.53 252.78 41.73 255.87 40.41 260.26 39.38 262.59 39.13 264.95 39.05 319.94 39.22 324.43 40.04 328.57 41.66 331.36 43.43"/>
                            <polygon points="57.61 174.51 61.68 174.57 174.57 174.57 174.57 135.53 58.68 135.41 54.16 134.68 49.97 133.17 46.1 130.68 43.88 128.46 41.72 125.24 40.41 122.17 39.38 117.78 39.13 115.44 39.05 113.09 38.95 106.81 174.57 106.81 174.57 67.77 38.95 67.77 39.54 55.81 40.54 52.03 42.19 48.51 45.02 44.87 47.44 42.87 50.84 41.01 54.57 39.8 59.13 39.13 61.49 39.05 174.57 39.05 174.57 0 61.58 0 57.62 .07 50.05 .57 44.8 1.27 39.88 2.24 35.28 3.47 31 4.97 27.04 6.71 23.48 8.65 20.11 10.88 17.03 13.35 14.22 16.07 11.67 19.06 9.36 22.32 7.26 25.95 5.45 29.81 3.89 33.97 2.59 38.45 1.54 43.26 .76 48.39 .25 53.85 .06 57.61 0 61.68 0 112.99 .06 116.96 .57 124.53 1.27 129.78 2.24 134.7 3.47 139.29 4.96 143.58 6.67 147.45 8.65 151.11 10.87 154.46 13.34 157.54 16.07 160.35 19.06 162.91 22.32 165.21 25.87 167.27 29.8 169.12 33.96 170.68 38.44 171.99 43.25 173.04 48.38 173.82 53.84 174.33 57.61 174.51"/>
                        </g>
                    </g>
                </svg>
            </a>

            <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">↤</button>

            <nav class="nav-menu">
                <a href="{% url 'home' %}" class="nav-link">Home</a>
                <a href="{% url 'project_gallery' %}" class="nav-link">Projects</a>
                <a href="{% url 'research' %}" class="nav-link">News</a>
                <a href="{% url 'about' %}" class="nav-link">About</a>
                <a href="{% url 'contact' %}" class="nav-link contact-link">Contact</a>
            </nav>
        </div>
    </header>

    <div class="project-name fade-in">
        <div class="intro">     
            <h1>{{ project.title }}</h1>
            <h4>{{ project.intro_text }}</h4>   
            
        </div>
        {% if project.intro_image %}
            <div class="img-aside">        
                <img src="{{ project.intro_image.url }}" alt="{{ project.title }} intro"></img>
            </div>
        {% endif %}
    </div>

    <div class="fullscreen-slideshow">
        <img src="{{ project.slideshow_1.url }}" alt="Slide 1">
        {% if project.slideshow_2 %}
            <img src="{{ project.slideshow_2.url }}" alt="Slide 2">
        {% endif %}
        {% if project.slideshow_3 %}
            <img src="{{ project.slideshow_3.url }}" alt="Slide 3">
        {% endif %}
    </div>

    <div class="project-info">
        <div class="text-block fade-on-scroll">
            <h2>The Main Idea</h2>
            {{ project.description|linebreaks }}
        </div>
        <div class="info-block fade-on-scroll">
            <h2>About the project:</h2>
            <table>
                <tr><td>Program:</td><td>{{ project.program }}</td></tr>
                <tr><td>Size:</td><td>{{ project.size }}</td></tr>
                <tr><td>Location:</td><td>{{ project.country }}</td></tr>
                <tr><td>Client:</td><td>{{ project.client }}</td></tr>
                <tr><td>Team:</td><td>{{ project.team|linebreaksbr }}</td></tr>
            {% if project.collaborators %}
                <tr><td>Collaborators:</td><td>{{ project.collaborators|linebreaksbr }}</td></tr>
            {% endif %}
                <tr><td>Year:</td><td>{{ project.year }}</td></tr>
            </table>
        </div>
    </div>

    <section class="horizontal-gallery">
        <div class="gallery-track">
            {% for img in project.gallery_images.all %}
            <figure class="gallery-item">
                <img src="{{ img.image.url }}" alt="{{ img.caption }}">
                <figcaption><strong>{{ img.caption }}</strong></figcaption>
            </figure>
            {% empty %}
            <p>No gallery images for this project.</p>
            {% endfor %}
        </div>
    </section>

    <!-- Related Projects Section -->
    <section class="related-projects" id="relatedProjects" data-category="{{ project.category|lower }}">
        <h2>Check other <span id="relatedCategory">{{ project.category|lower }}</span> projects:</h2>
        <div class="related-projects-container"></div>
    </section>

    <button class="scroll-arrow" aria-label="Scroll Down">⤓</button>

    <div class="footer-wrapper">
        <footer class="static-footer" id="staticFooter">
            <div class="footer-content">
                <div class="footer-left">
                    <p>
                        Our work redefines how people experience space.
                        Through clean lines and thoughtful materials,
                        we shape environments that inspire.
                    </p>
                </div>
                <div class="footer-right">
                    <div class="footer-right-col">
                        <p>
                        Contact us at:<br>
                        <a href="mailto:info@entropic.es">info@entropic.es</a>
                        </p>
                    </div>
                    <div class="footer-right-col">
                        <p>
                        Carrer de Sant Gabriel, 15,
                        Gràcia, 08012 Barcelona,
                        Spain
                        </p>
                    </div>
                </div>
            </div>
        </footer>

        <footer class="mini-footer" id="miniFooter">
            <div class="mini-footer-content">
                <div class="social-icons">
                    <a href="https://instagram.com" target="_blank" aria-label="Instagram">
                        <img src="{% static 'images/icons/instagram.svg' %}" alt="Instagram">
                    </a>
                    <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn">
                        <img src="{% static 'images/icons/linkedin.svg' %}" alt="LinkedIn">
                    </a>
                    <a href="https://facebook.com" target="_blank" aria-label="Facebook">
                        <img src="{% static 'images/icons/facebook.svg' %}" alt="Facebook">
                    </a>
                </div>
                <p class="copyright">© 2025 Entropic Atelier. All rights reserved.</p>
            </div>
        </footer>
    </div>    

    <script src="{% static 'scripts/header-toggle.js' %}" defer></script>
    <script src="{% static 'scripts/projects/slideshow.js' %}"></script>
    <script>
        // 1. Declare first
        const relatedProjects = [
            {% for p in related_projects %}
            {
                title: "{{ p.title|escapejs }}",
                image: "{{ p.image_main.url }}",
                url: "{% url 'project_detail' slug=p.slug %}",
                category: "{{ p.category|lower }}"
            }{% if not forloop.last %},{% endif %}
            {% endfor %}
        ];

        // 2. Use after declaration
        console.log("DEBUG relatedProjects:", relatedProjects);

        const relatedContainer = document.querySelector(".related-projects-container");
        relatedProjects.forEach(project => {
            const div = document.createElement("div");
            div.className = "related-project";
            div.innerHTML = `
                <a href="${project.url}">
                    <img src="${project.image}" alt="${project.title}">
                    <p>${project.title}</p>
                </a>
            `;
            relatedContainer.appendChild(div);
        });
    </script>

    <script>
        const scrollArrow = document.querySelector('.scroll-arrow');

         window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;

            const atBottom = scrollY + windowHeight >= documentHeight - 50;

            scrollArrow.style.opacity = atBottom ? '0' : '1';
        });
    </script>

    <script src="{% static 'scripts/projects/fade-in.js' %}"></script>

</body>
</html>
