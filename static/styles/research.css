/*! RESEARCH / NEWS PAGE — CLEANED */

/*! OVERALL OVERRIDES */
:root{
  --hdr: 80px;                 
}
@media (max-width:1000px){
  :root{ --hdr: 61px; }       
}

body{
  background:#f9f9f9;
  overflow-x:hidden;
  margin: 0;
  padding: 0;
}
.site-header{
  background:transparent;
  z-index:100;
}
.static-footer{ display:block; }
.footer-wrapper{
  background:#f9f9f9;
  padding:1rem 0;
}
.mini-footer{ margin-bottom:0; }

/* !THE RESEARCH PAGE */
.research-page{
  display:grid;
  grid-template-columns:280px 1fr;
  position:relative;
  margin-bottom: 2rem;
  overflow-anchor:none;
}

/*!ASIDE*/
.research-sidebar{
  position:sticky;
  top:var(--hdr);
  height:calc(90vh - var(--hdr));
  overflow:auto;
  padding:1rem;
  background-color: white;
  /* border-right:1.5px solid #000; */
  margin-left: 2rem;
  border-radius: 22px;
}

/**CUSTOM SCROLL ASIDE**/
.research-sidebar::-webkit-scrollbar{ width:0.6rem; }
.research-sidebar::-webkit-scrollbar-track{ background:transparent; }
.research-sidebar::-webkit-scrollbar-thumb{ background:#000; border-radius:99px; border:none; padding: 0.1rem;}
.research-sidebar::-webkit-scrollbar-thumb:hover{ background:#888; }

/**LIST STYLE ASIDE**/
.research-list{ list-style:none; margin:0; padding:0; font-variant-numeric:tabular-nums; }
.research-list-item{ padding:.4rem .25rem; line-height:1.25; opacity:.6; }
.research-list-item a{ text-decoration:none; color:inherit; display:inline-block; }
.research-list-item.is-active,
.research-list-item:hover{ opacity:1; }

/*!MAIN ARTICLE*/
.research-article{
  width: calc(100vw - 4rem);
  position:relative;
  padding:1rem 2rem 6rem;
  overscroll-behavior:auto !important;
}

/**SCROLL MAIN ARTICLE**/
.research-article.scroll-area{
  overflow:visible !important;
  -webkit-overflow-scrolling:auto !important;
}
.research-article.js-drag-scroll{
  touch-action:auto !important;
  cursor:auto;
}
/**STACKING**/
.research-entry + .research-entry{ margin-top:10rem; }
.research-entry{ scroll-margin-top:50px; }

/*!ALL ARTICLES*/
.article-header{
  display:grid;
  grid-template-columns:1fr minmax(180px,260px);
  gap:2rem;
  align-items:start;
  padding-bottom:2rem;
  border-bottom:1.5px solid #000;
  margin-bottom:2rem;
}
.article-title-wrap{ display:grid; gap:1rem; }
.article-title{
  font-size:clamp(3rem,7vw,8rem);
  line-height:1;
  font-weight:500;
  font-family:'Halyard-Display',sans-serif;
  max-width:20ch;
}
.article-meta{
  display:flex; flex-direction:column;
  justify-content:space-between;
  align-items:flex-end; align-self:stretch; min-height:100%;
}
.article-index{
  opacity: 0%;
  font-size:clamp(4rem,7vw,8rem);
  font-weight:500;
  font-family:'Halyard-Display',sans-serif;
  line-height:1;
}
.article-subtitle{
  font-size:clamp(0.5rem,2vw,1rem); width:100%;
  text-align:right; justify-items:end;
}

/* ───────── Utilities previously used ───────── */
/* keep for other elements but article overrides them above */
.scroll-area{ overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:auto; }
.hide-scrollbar{ -ms-overflow-style:none; scrollbar-width:none; }
.hide-scrollbar::-webkit-scrollbar{ display:none; width:0; height:0; }
.js-drag-scroll{ cursor:grab; touch-action:none; scroll-behavior:auto; }
.js-drag-scroll.is-dragging{ cursor:grabbing; user-select:none; }

/*!RESPONSIVE*/
@media (max-width:1300px){
  .research-page{ grid-template-columns:220px 1fr; }
}

@media (max-width:1000px){
  .article-header{ grid-template-columns:1fr 160px; gap:1rem; }
  .research-article{ padding:1.5rem 1.5rem 4rem; }
  .article-index{ display: none;}
  .article-subtitle{ display: none;}
}

@media (max-width:800px){
    .site-header{ 
    background:#f9f9f9;
  }
  .research-page{ grid-template-columns:1fr; }

  .articles-toggle{
    position:sticky; top:60px; z-index:6;
    justify-self:left; align-items:start;
    background:#000; color:#fff; width:100vw;
    padding:1rem 2rem; border:none;
  }
  .research-sidebar{
    position:fixed; left:0; right:0; top:var(--hdr);
    height:calc(100vh - var(--hdr));
    background:#fff;
    border-top:1.5px solid #000;
    border-bottom:1.5px solid #000;
    z-index:9;
    opacity:0; transform:translateY(-8px) scaleY(.98);
    pointer-events:none;
    transition:transform .18s ease, opacity .18s ease;
    margin: 0;
    border-radius: 0px;
  }
  .research-sidebar.is-open{
    opacity:1; transform:none; pointer-events:auto;
  }

}

@media (min-width:801px){
  .articles-toggle{ display:none; }
}

@media (max-width: 600px){
  .article-header{ 
    grid-template-columns: 1fr; 
    gap: .75rem;
    padding-bottom:1rem;
  }
  .article-meta{
    align-items: flex-start;  /* stop right-align squeeze */
    width: 100%;
  }
}

/* Give the content a bit more room at very small widths */
@media (max-width: 560px){
  .research-article{ padding: 1rem 1rem 3rem; }
}

/*! ____________LAYOUTS (PARTIALS)____________ */
.block-text h3 { font-size: 1.1rem; font-family: 'Fustat', sans-serif; padding: 0; margin: 0 0 1.5rem 0; font-weight: 700; }
.block-text p { font-size: 1.1rem; line-height: 1.3; margin: 0 0 1rem 0; text-align: justify; }


.block-a {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 2rem;
margin-bottom: 4rem;
align-items: stretch;
}
.block-a__col--image,
.block-a__col--stack {
display: flex;
flex-direction: column;
justify-content: space-between;}

.block-a__col--image img { width: 100%; height: auto; object-fit: cover; display: block; aspect-ratio: 2 / 3; }
.block-a__col--stack { height: 100%; }
.block-a__thumbs { display: flex; flex-direction: column; gap: 1rem; justify-content: flex-end; flex-grow: 1; }
.block-media--sm { width: 50%; align-self: flex-end; }
.block-media--sm img { aspect-ratio: 3 / 2; object-fit: cover; width: 100%; display: block; }


.block-b {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 2rem;
margin-bottom: 4rem;
align-items: stretch;
}
.block-b__col--image {
display: flex;
flex-direction: column;
}
.block-b__col--text { 
  display: grid; 
  grid-template-columns: 1fr 1fr;   
  align-content: start; 
}

.block-b__col--image { justify-content: stretch; }
.block-b__col--image img { width: 100%; height: auto; object-fit: cover; display: block; aspect-ratio: 2 / 3;}
.block-b__col--text .block-text {   
  grid-column: 1;
  width: 100%; 
}
.block-b__col--text h3 { font-size: 1.1rem; font-family: 'Fustat', sans-serif; font-weight: 700; margin: 0 0 1.5rem 0; }
.block-b__col--text p { font-size: 1.1rem; line-height: 1.3; margin: 0 0 1rem 0; text-align: justify; }



.block-c{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 4rem;
}
.block-c__item img{
  width: 100%;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  display: block;
}


.block-d{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin-bottom: 4rem;
  align-items: start;
}
.block-d__text{
  grid-column: 1;
  justify-self: start;              
  width: 100%;
}

@media (max-width: 1300px) {
  .block-text p {  
    font-size: 0.9rem;
    line-height: 1.2;
  }
  .block-a, .block-b, .block-c, .block-d{
    gap: 1rem;
    margin-bottom: 2rem;
  }
  .block-a__thumbs {
    gap: 0.5rem;
  }
  .block-b__col--text {
  grid-template-columns: 2fr 1fr;
  }
}

@media (min-width: 961px){
  .block-c{ grid-template-columns: repeat(4, 1fr); }
}

@media (max-width: 960px) {
    .block-a, .block-b {
    gap: 1rem;
    margin-bottom: 2rem;
  }
  .block-a__thumbs {
    gap: 1rem
  }
  .block-a, .block-b { grid-template-columns: 1fr; }
  .block-a__col--stack, .block-b__col--text { order: -1; }
  .block-b__col--text .block-text{ width: 100%; }
  .block-b__col--text{ display: block; }
  .block-media--sm { width: 100%; }
  .block-c{ grid-template-columns: repeat(2, 1fr); gap: 0.5rem;}
  .block-d{ grid-template-columns: 1fr; }
  .block-d__text{ width: 100%; }
}


.short-gallery{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 4rem;
}
.short-gallery__item img{
  width: 100%;
  aspect-ratio: auto;
  object-fit: cover;
  display: block;
}

@media (min-width: 1000px){
  .short-gallery--2{ grid-template-columns: repeat(2, 1fr); }
  .short-gallery--3{ grid-template-columns: repeat(3, 1fr); }
  .short-gallery--4{ grid-template-columns: repeat(4, 1fr); }
}

@media (max-width: 700px){
  .short-gallery{
    grid-template-columns: 1fr;  /* 1 per row */
  }
}

/* MOBILE ONLY — pin header and toggle, size overlay under them */
@media (max-width: 800px){
  /* header stays on top no matter what */
  .site-header{
    position: fixed;       /* was likely sticky or static */
    top: 0; left: 0; right: 0;
    z-index: 300;
  }

  /* toggle bar sits directly under the header */
  :root{ --toggle: 44px; } /* adjust to your toggle's height */
  .articles-toggle{
    position: fixed;       /* was sticky */
    top: var(--hdr);
    left: 0; right: 0;
    z-index: 250;
    width: 100%;           /* avoid 100vw scroll-jitter */
  }

  /* overlay starts below header+toggle and owns its scrolling */
  .research-sidebar{
    position: fixed;
    top: calc(var(--hdr) + var(--toggle));
    left: 0; right: 0;
    height: calc(100dvh - var(--hdr) - var(--toggle));
    overflow: auto;
    overscroll-behavior: contain;  /* don't bubble scroll to page */
    z-index: 200;
  }

  /* give the content room so it's not hidden under the fixed bars */
  .research-article{
    padding-top: calc(var(--hdr) + var(--toggle) + 1rem);
  }
}
